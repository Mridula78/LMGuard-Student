services:
  - type: web
    name: lmguard-backend
    env: python
    buildCommand: pip install -r requirements.txt
    startCommand: uvicorn main:app --host 0.0.0.0 --port $PORT
    envVars:
      - key: OPENAI_KEY
        sync: false
      - key: POLICY_FILE
        value: /app/config/policy.yaml
      - key: AGENT_TIMEOUT_SECONDS
        value: 1.0
      - key: CACHE_MAX_ITEMS
        value: 1000
      - key: EMBEDDING_PROVIDER
        value: OPENAI
      - key: LOG_FILE
        value: /data/lmguard_audit.json
      - key: HASH_SALT
        generateValue: true


